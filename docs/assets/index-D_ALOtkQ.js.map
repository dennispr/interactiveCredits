{"version":3,"mappings":"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","names":["SceneManager","app","__publicField","SceneClass","newScene","error","keyCode","ticker","deltaTime","GameConfig","_Layout","windowWidth","windowHeight","scaleX","scaleY","scale","screenWidth","screenHeight","roomWidth","roomHeight","newDimensions","targetDimensions","startDimensions","startTime","animate","currentTime","elapsed","progress","easeElastic","t","p","s","easedProgress","callback","baseSize","width","height","Layout","BaseScene","Container","_deltaTime","color","background","Graphics","AboutScene","titleText","Text","descriptionLines","lineHeight","startY","line","index","lineText","creditsText","buttonContainer","buttonSize","buttonBg","buttonText","isHovered","sceneManager","StartScene","__vitePreload","StartScene$1","PatronManager","patronsData","assignedPatrons","unassignedPatrons","maxAssignedFloor","max","roomsNeeded","floorsNeeded","floorNum","floor","roomNum","room","patron","f","r","currentFloorIndex","currentRoomIndex","roomAssigned","id","roomNumber","floorData","occupiedRooms","HallwayScene","hallwayBg","ceiling","doorWidth","doorHeight","doorSpacing","i","doorContainer","doorFrame","doorHandle","roomLabel","occupancyLabel","elevatorContainer","elevatorWidth","elevatorHeight","elevatorShaft","upButton","downButton","floorIndicator","elevatorLabel","floorText","controlsBackground","controlsText","doorBottom","speed","interactionDistance","door","elevatorDistance","hasPatron","RoomScene","currentFloorRef","patronManagerRef","RoomSceneWithData","message","messageContainer","messageWidth","messageHeight","messageBg","messageText","maxFloors","popupContainer","overlay","popupWidth","popupHeight","popup","title","buttonsContainer","buttonHeight","buttonSpacing","isCurrentFloor","button","instructions","isSelected","HallwaySceneWithFloor","TransitionScene","deltaMs","_deltaMs","subtitleText","buttonY","centerX","text","x","y","onClick","Game","Application","layout","gameContainer","dimensions","currentScene","event","startGame"],"ignoreList":[],"sources":["../../src/core/SceneManager.ts","../../src/config/GameConfig.ts","../../src/config/Layout.ts","../../src/core/BaseScene.ts","../../src/scenes/AboutScene.ts","../../src/utils/PatronManager.ts","../../src/scenes/HallwayScene.ts","../../src/scenes/TransitionScene.ts","../../src/scenes/StartScene.ts","../../src/main.ts"],"sourcesContent":["import { Application, Container } from 'pixi.js';\n\nexport interface IScene {\n  container: Container;\n  enter(): Promise<void> | void;\n  exit(): Promise<void> | void;\n  update?(deltaTime: number): void;\n  handleKeyDown?(keyCode: string): void;\n  handleKeyUp?(keyCode: string): void;\n  destroy(): void;\n}\n\nexport type SceneConstructor = new (app: Application) => IScene;\n\nexport class SceneManager {\n  private app: Application;\n  private currentScene: IScene | null = null;\n  private isTransitioning: boolean = false;\n\n  constructor(app: Application) {\n    this.app = app;\n  }\n\n  async switchTo(SceneClass: SceneConstructor): Promise<void> {\n    if (this.isTransitioning) {\n      console.warn('Scene transition already in progress');\n      return;\n    }\n\n    this.isTransitioning = true;\n\n    try {\n      // Exit current scene\n      if (this.currentScene) {\n        await this.currentScene.exit();\n        this.app.stage.removeChild(this.currentScene.container);\n        this.currentScene.destroy();\n      }\n\n      // Create and enter new scene\n      const newScene = new SceneClass(this.app);\n      this.currentScene = newScene;\n      \n      this.app.stage.addChild(newScene.container);\n      await newScene.enter();\n\n    } catch (error) {\n      console.error('Error during scene transition:', error);\n    } finally {\n      this.isTransitioning = false;\n    }\n  }\n\n  handleKeyDown(keyCode: string): void {\n    if (this.currentScene && this.currentScene.handleKeyDown) {\n      this.currentScene.handleKeyDown(keyCode);\n    }\n  }\n\n  handleKeyUp(keyCode: string): void {\n    if (this.currentScene && this.currentScene.handleKeyUp) {\n      this.currentScene.handleKeyUp(keyCode);\n    }\n  }\n\n  setupUpdateLoop(): void {\n    this.app.ticker.add((ticker) => {\n      const deltaTime = ticker.deltaTime;\n      \n      if (this.currentScene && this.currentScene.update) {\n        this.currentScene.update(deltaTime);\n      }\n    });\n  }\n\n  getCurrentScene(): IScene | null {\n    return this.currentScene;\n  }\n}","export const GameConfig = {\n  // Screen dimensions\n  SCREEN_WIDTH: 1200,\n  SCREEN_HEIGHT: 800,\n  \n  // Room dimensions (16:9 aspect ratio as requested)\n  ROOM_WIDTH: 800,\n  ROOM_HEIGHT: 450,\n  \n  // Colors\n  BACKGROUND_COLOR: 0x1a1a2e,\n  \n  // Building layout\n  ROOMS_PER_FLOOR: 3,\n  MAX_FLOORS: 5,\n  \n  // Player settings\n  PLAYER_SPEED: 150, // pixels per second\n  PLAYER_WIDTH: 32,\n  PLAYER_HEIGHT: 90, // 75% of door height (120)\n  \n  // NPC settings\n  NPC_SPEED: 50, // pixels per second\n  NPC_WIDTH: 32,\n  NPC_HEIGHT: 48,\n  NPC_PACE_DISTANCE: 100, // how far NPCs pace in their rooms\n  \n  // Interaction settings\n  INTERACTION_DISTANCE: 50,\n  \n  // UI colors\n  UI_COLORS: {\n    PRIMARY: 0x4a90e2,\n    SECONDARY: 0x7b68ee,\n    ACCENT: 0xffd700,\n    TEXT: 0xffffff,\n    BUTTON: 0x2c3e50,\n    BUTTON_HOVER: 0x34495e,\n    DANGER: 0xe74c3c,\n    SUCCESS: 0x27ae60,\n    WARNING: 0xf39c12,\n  },\n  \n  // Placeholder colors for assets\n  PLACEHOLDER_COLORS: {\n    NPC: 0xff6b6b,        // Red-ish for NPCs\n    ITEM: 0x4ecdc4,       // Teal for items\n    POSTER: 0x45b7d1,     // Blue for posters\n    BACKGROUND: 0x96ceb4, // Green for backgrounds\n    DOOR: 0x6c5ce7,       // Purple for doors\n    WALL: 0x95a5a6,       // Gray for walls\n    FLOOR: 0x8d6e63,      // Brown for floors\n  },\n  \n  // Animation timings (in milliseconds)\n  FADE_DURATION: 1000,\n  TRANSITION_DURATION: 500,\n  \n  // Text settings\n  DEFAULT_FONT_FAMILY: 'Arial, sans-serif',\n  FONT_SIZES: {\n    TITLE: 48,\n    SUBTITLE: 24,\n    BODY: 18,\n    SMALL: 14,\n    UI: 16,\n  },\n} as const;","import { GameConfig } from './GameConfig';\n\nexport interface LayoutDimensions {\n  screenWidth: number;\n  screenHeight: number;\n  roomWidth: number;\n  roomHeight: number;\n  scale: number;\n}\n\ninterface AnimatedDimensions extends LayoutDimensions {\n  isAnimating: boolean;\n}\n\nexport class Layout {\n  private static instance: Layout;\n  private dimensions: LayoutDimensions;\n  private animatedDimensions: AnimatedDimensions;\n  private baseWidth = GameConfig.SCREEN_WIDTH;\n  private baseHeight = GameConfig.SCREEN_HEIGHT;\n  private animationId: number | null = null;\n  private bounceSettings = {\n    duration: 300, // ms\n    elasticity: 0.3,\n    damping: 0.8\n  };\n\n  private constructor() {\n    this.dimensions = this.calculateDimensions();\n    this.animatedDimensions = { ...this.dimensions, isAnimating: false };\n    this.setupResizeListener();\n  }\n\n  static getInstance(): Layout {\n    if (!Layout.instance) {\n      Layout.instance = new Layout();\n    }\n    return Layout.instance;\n  }\n\n  private calculateDimensions(): LayoutDimensions {\n    const windowWidth = window.innerWidth;\n    const windowHeight = window.innerHeight;\n    \n    // Calculate scale to fit screen while maintaining aspect ratio\n    const scaleX = windowWidth / this.baseWidth;\n    const scaleY = windowHeight / this.baseHeight;\n    const scale = Math.min(scaleX, scaleY, 1.2); // Cap at 120% for readability\n    \n    const screenWidth = this.baseWidth * scale;\n    const screenHeight = this.baseHeight * scale;\n    \n    // Room dimensions scale proportionally\n    const roomWidth = GameConfig.ROOM_WIDTH * scale;\n    const roomHeight = GameConfig.ROOM_HEIGHT * scale;\n\n    return {\n      screenWidth,\n      screenHeight,\n      roomWidth,\n      roomHeight,\n      scale\n    };\n  }\n\n  private setupResizeListener(): void {\n    window.addEventListener('resize', () => {\n      const newDimensions = this.calculateDimensions();\n      this.animateToNewDimensions(newDimensions);\n    });\n  }\n\n  private animateToNewDimensions(targetDimensions: LayoutDimensions): void {\n    if (this.animationId) {\n      cancelAnimationFrame(this.animationId);\n    }\n\n    const startDimensions = { ...this.animatedDimensions };\n    const startTime = performance.now();\n    this.animatedDimensions.isAnimating = true;\n\n    const animate = (currentTime: number) => {\n      const elapsed = currentTime - startTime;\n      const progress = Math.min(elapsed / this.bounceSettings.duration, 1);\n      \n      // Elastic easing function for bounce effect\n      const easeElastic = (t: number): number => {\n        if (t === 0 || t === 1) return t;\n        const p = 0.3;\n        const s = p / (2 * Math.PI) * Math.asin(1);\n        return -(Math.pow(2, 10 * (t - 1)) * Math.sin((t - 1 - s) * (2 * Math.PI) / p));\n      };\n      \n      const easedProgress = progress < 1 ? 1 + easeElastic(progress) : 1;\n      \n      // Interpolate dimensions with bounce\n      this.animatedDimensions.screenWidth = startDimensions.screenWidth + \n        (targetDimensions.screenWidth - startDimensions.screenWidth) * easedProgress;\n      this.animatedDimensions.screenHeight = startDimensions.screenHeight + \n        (targetDimensions.screenHeight - startDimensions.screenHeight) * easedProgress;\n      this.animatedDimensions.roomWidth = startDimensions.roomWidth + \n        (targetDimensions.roomWidth - startDimensions.roomWidth) * easedProgress;\n      this.animatedDimensions.roomHeight = startDimensions.roomHeight + \n        (targetDimensions.roomHeight - startDimensions.roomHeight) * easedProgress;\n      this.animatedDimensions.scale = startDimensions.scale + \n        (targetDimensions.scale - startDimensions.scale) * easedProgress;\n\n      this.notifyResize();\n\n      if (progress < 1) {\n        this.animationId = requestAnimationFrame(animate);\n      } else {\n        this.dimensions = targetDimensions;\n        this.animatedDimensions = { ...targetDimensions, isAnimating: false };\n        this.animationId = null;\n        this.notifyResize();\n      }\n    };\n\n    this.animationId = requestAnimationFrame(animate);\n  }\n\n  private resizeCallbacks: Array<(dimensions: LayoutDimensions) => void> = [];\n\n  onResize(callback: (dimensions: LayoutDimensions) => void): void {\n    this.resizeCallbacks.push(callback);\n  }\n\n  private notifyResize(): void {\n    this.resizeCallbacks.forEach(callback => callback(this.dimensions));\n  }\n\n  getDimensions(): LayoutDimensions {\n    return { ...this.animatedDimensions };\n  }\n\n  // Convenience getters - use animated dimensions for smooth transitions\n  get screenWidth(): number { return this.animatedDimensions.screenWidth; }\n  get screenHeight(): number { return this.animatedDimensions.screenHeight; }\n  get roomWidth(): number { return this.animatedDimensions.roomWidth; }\n  get roomHeight(): number { return this.animatedDimensions.roomHeight; }\n  get scale(): number { return this.animatedDimensions.scale; }\n\n  // Scaled values for UI elements\n  get playerWidth(): number { return GameConfig.PLAYER_WIDTH * this.scale; }\n  get playerHeight(): number { return GameConfig.PLAYER_HEIGHT * this.scale; }\n  get npcWidth(): number { return GameConfig.NPC_WIDTH * this.scale; }\n  get npcHeight(): number { return GameConfig.NPC_HEIGHT * this.scale; }\n  get interactionDistance(): number { return GameConfig.INTERACTION_DISTANCE * this.scale; }\n  get playerSpeed(): number { return GameConfig.PLAYER_SPEED * this.scale; }\n  get npcSpeed(): number { return GameConfig.NPC_SPEED * this.scale; }\n\n  // Font sizes that scale with screen size\n  getFontSize(baseSize: number): number {\n    return Math.max(12, baseSize * this.scale);\n  }\n\n  // Positioning helpers\n  centerX(width: number = 0): number {\n    return (this.screenWidth - width) / 2;\n  }\n\n  centerY(height: number = 0): number {\n    return (this.screenHeight - height) / 2;\n  }\n\n  // Button dimensions\n  getButtonSize(): { width: number; height: number } {\n    return {\n      width: 150 * this.scale,\n      height: 50 * this.scale\n    };\n  }\n\n  // Safe area margins\n  get margin(): number {\n    return 20 * this.scale;\n  }\n\n  // Door dimensions and spacing\n  get doorWidth(): number { return 80 * this.scale; }\n  get doorHeight(): number { return 120 * this.scale; }\n  get doorHandleOffset(): number { return 15 * this.scale; }\n  get doorHandleRadius(): number { return 3 * this.scale; }\n  get roomLabelOffset(): number { return 20 * this.scale; }\n  get occupancyLabelOffset(): number { return 15 * this.scale; }\n\n  // Elevator dimensions\n  get elevatorWidth(): number { return 100 * this.scale; }\n  get elevatorHeight(): number { return 150 * this.scale; }\n  get elevatorButtonRadius(): number { return 15 * this.scale; }\n  get elevatorUpButtonY(): number { return 30 * this.scale; }\n  get elevatorDownButtonY(): number { return 60 * this.scale; }\n  get elevatorFloorIndicatorY(): number { return 90 * this.scale; }\n  get elevatorLabelY(): number { return 120 * this.scale; }\n  get elevatorMargin(): number { return 50 * this.scale; }\n\n  // UI background dimensions\n  get hallwayControlsBackgroundWidth(): number { return 300 * this.scale; }\n  get hallwayControlsBackgroundHeight(): number { return 30 * this.scale; }\n  get roomControlsBackgroundWidth(): number { return 400 * this.scale; }\n  get roomControlsBackgroundHeight(): number { return 30 * this.scale; }\n  get controlsBackgroundPadding(): number { return 5 * this.scale; }\n\n  // Player positioning\n  get playerStartX(): number { return 100 * this.scale; }\n  get playerGroundOffset(): number { return 10 * this.scale; }\n\n  // Room elements\n  get itemSize(): number { return 30 * this.scale; }\n  get posterWidth(): number { return 60 * this.scale; }\n  get posterHeight(): number { return 80 * this.scale; }\n  get posterFrameBorder(): number { return 3 * this.scale; }\n\n  // Character features\n  get characterFaceY(): number { return 12 * this.scale; }\n  get characterFaceRadius(): number { return 3 * this.scale; }\n  get tierIndicatorOffset(): number { return 8 * this.scale; }\n  get tierIndicatorRadius(): number { return 4 * this.scale; }\n\n  // Movement boundaries\n  get hallwaySideMargin(): number { return 50 * this.scale; }\n  get roomSideMargin(): number { return 25 * this.scale; }\n\n  // Architecture elements\n  get ceilingHeight(): number { return 80 * this.scale; }\n}","import { Application, Container, Graphics } from 'pixi.js';\nimport { IScene } from './SceneManager';\nimport { Layout, LayoutDimensions } from '../config/Layout';\n\nexport abstract class BaseScene implements IScene {\n  protected app: Application;\n  public container: Container;\n  protected keysPressed: Set<string> = new Set();\n  protected layout: Layout;\n\n  constructor(app: Application) {\n    this.app = app;\n    this.container = new Container();\n    this.layout = Layout.getInstance();\n  }\n\n  abstract enter(): Promise<void> | void;\n\n  exit(): Promise<void> | void {\n    // Override in subclasses if needed\n  }\n\n  update?(_deltaTime: number): void {\n    // Override in subclasses if needed\n  }\n\n  handleKeyDown(keyCode: string): void {\n    this.keysPressed.add(keyCode);\n  }\n\n  handleKeyUp(keyCode: string): void {\n    this.keysPressed.delete(keyCode);\n  }\n\n  // Optional resize handler - implement in subclasses that need responsive behavior\n  onResize?(_dimensions: LayoutDimensions): void;\n\n  isKeyPressed(keyCode: string): boolean {\n    return this.keysPressed.has(keyCode);\n  }\n\n  destroy(): void {\n    this.container.destroy({ children: true });\n    this.keysPressed.clear();\n  }\n\n  protected createBackground(color: number = 0x000000): void {\n    const background = new Graphics()\n      .rect(0, 0, this.layout.screenWidth, this.layout.screenHeight)\n      .fill(color);\n    \n    this.container.addChild(background);\n  }\n}","import { Application, Graphics, Text, Container } from 'pixi.js';\nimport { BaseScene } from '../core/BaseScene';\nimport { GameConfig } from '../config/GameConfig';\n\nexport class AboutScene extends BaseScene {\n  private backButton!: Container;\n\n  constructor(app: Application) {\n    super(app);\n  }\n\n  async enter(): Promise<void> {\n    this.createBackground(GameConfig.BACKGROUND_COLOR);\n    this.createContent();\n    this.createBackButton();\n    this.setupInteractivity();\n    \n    console.log('â„¹ï¸ About Scene - Interactive Credits Information');\n  }\n\n  private createContent(): void {\n    // Title\n    const titleText = new Text({\n      text: 'About Interactive Credits',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.TITLE),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    \n    titleText.anchor.set(0.5);\n    titleText.x = this.layout.centerX();\n    titleText.y = this.layout.screenHeight * 0.15;\n    \n    // Main description - split into multiple text objects to avoid overlap\n    const descriptionLines = [\n      'Welcome to our Interactive Credits system!',\n      '',\n      'Inspired by Whittier, Alaska - a unique town where everyone lives',\n      'under one roof - this experience showcases our amazing patrons',\n      'as residents of \"The Workshop.\"',\n      '',\n      'Each patron has their own room with:',\n      'â€¢ Personal items and decorations',\n      'â€¢ A unique story to tell', \n      'â€¢ Custom artwork and posters',\n      '',\n      'Navigate through the building, meet our supporters,',\n      'and learn about the incredible people who make our work possible.',\n      '',\n      'Use the arrow keys to move and SPACE to interact!'\n    ];\n    \n    const lineHeight = this.layout.getFontSize(GameConfig.FONT_SIZES.BODY) * 1.3;\n    const startY = this.layout.screenHeight * 0.25;\n    \n    descriptionLines.forEach((line, index) => {\n      const lineText = new Text({\n        text: line,\n        style: {\n          fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n          fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.BODY),\n          fill: GameConfig.UI_COLORS.TEXT,\n          align: 'center'\n        }\n      });\n      \n      lineText.anchor.set(0.5);\n      lineText.x = this.layout.centerX();\n      lineText.y = startY + (index * lineHeight);\n      \n      this.container.addChild(lineText);\n    });\n    \n    // Credits\n    const creditsText = new Text({\n      text: 'Thank you to our supporters!',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL),\n        fill: GameConfig.UI_COLORS.SECONDARY,\n        align: 'center',\n        fontStyle: 'italic'\n      }\n    });\n    \n    creditsText.anchor.set(0.5);\n    creditsText.x = this.layout.centerX();\n    creditsText.y = this.layout.screenHeight * 0.85;\n    \n    this.container.addChild(titleText, creditsText);\n  }\n\n  private createBackButton(): void {\n    const buttonContainer = new Container();\n    const buttonSize = this.layout.getButtonSize();\n    \n    // Button background\n    const buttonBg = new Graphics()\n      .roundRect(0, 0, buttonSize.width * 0.8, buttonSize.height * 0.8, 8)\n      .fill(GameConfig.UI_COLORS.BUTTON);\n    \n    // Button text\n    const buttonText = new Text({\n      text: 'BACK',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    \n    buttonText.anchor.set(0.5);\n    buttonText.x = (buttonSize.width * 0.8) / 2;\n    buttonText.y = (buttonSize.height * 0.8) / 2;\n    \n    buttonContainer.addChild(buttonBg, buttonText);\n    buttonContainer.x = this.layout.centerX(buttonSize.width * 0.8);\n    buttonContainer.y = this.layout.screenHeight * 0.92 - (buttonSize.height * 0.8);\n    \n    // Make interactive\n    buttonContainer.eventMode = 'static';\n    buttonContainer.cursor = 'pointer';\n    \n    // Store references for hover effects\n    (buttonContainer as any).background = buttonBg;\n    (buttonContainer as any).text = buttonText;\n    \n    this.backButton = buttonContainer;\n    this.container.addChild(this.backButton);\n  }\n\n  private setupInteractivity(): void {\n    this.backButton.on('pointerenter', () => {\n      this.updateButtonAppearance(true);\n    });\n    \n    this.backButton.on('pointerleave', () => {\n      this.updateButtonAppearance(false);\n    });\n    \n    this.backButton.on('pointerdown', () => {\n      this.goBack();\n    });\n  }\n\n  private updateButtonAppearance(isHovered: boolean): void {\n    const background = (this.backButton as any).background as Graphics;\n    const color = isHovered ? GameConfig.UI_COLORS.BUTTON_HOVER : GameConfig.UI_COLORS.BUTTON;\n    const buttonSize = this.layout.getButtonSize();\n    \n    background.clear();\n    background.roundRect(0, 0, buttonSize.width * 0.8, buttonSize.height * 0.8, 8).fill(color);\n  }\n\n  onResize(): void {\n    // Clear and recreate content on resize\n    this.container.removeChildren();\n    this.createBackground(GameConfig.BACKGROUND_COLOR);\n    this.createContent();\n    this.createBackButton();\n    this.setupInteractivity();\n  }\n\n  handleKeyDown(keyCode: string): void {\n    super.handleKeyDown(keyCode);\n    \n    switch (keyCode) {\n      case 'Escape':\n      case 'Backspace':\n      case 'Enter':\n        this.goBack();\n        break;\n    }\n  }\n\n  private async goBack(): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    if (sceneManager) {\n      const { StartScene } = await import('./StartScene');\n      await sceneManager.switchTo(StartScene);\n    }\n  }\n}","import { Patron, BuildingLayout, Floor, Room, RoomPosition } from '../types/GameTypes';\nimport { GameConfig } from '../config/GameConfig';\nimport patronsData from '../data/patrons.json';\n\nexport class PatronManager {\n  private patrons: Patron[] = [];\n  private building: BuildingLayout = { floors: [] };\n\n  constructor() {\n    this.loadPatrons();\n    this.generateBuilding();\n  }\n\n  private loadPatrons(): void {\n    this.patrons = patronsData.patrons as Patron[];\n    console.log(`ðŸ“‹ Loaded ${this.patrons.length} patrons`);\n  }\n\n  private generateBuilding(): void {\n    // Clear existing building\n    this.building.floors = [];\n    \n    // Separate patrons with specific room assignments from those without\n    const assignedPatrons = this.patrons.filter(p => p.floor !== undefined && p.roomNumber !== undefined);\n    const unassignedPatrons = this.patrons.filter(p => p.floor === undefined || p.roomNumber === undefined);\n    \n    // Determine how many floors we need\n    const maxAssignedFloor = assignedPatrons.reduce((max, p) => Math.max(max, p.floor || 0), 0);\n    const totalPatrons = this.patrons.length;\n    const roomsNeeded = totalPatrons;\n    const floorsNeeded = Math.max(\n      Math.ceil(roomsNeeded / GameConfig.ROOMS_PER_FLOOR),\n      maxAssignedFloor,\n      1\n    );\n    \n    // Initialize floors\n    for (let floorNum = 1; floorNum <= Math.min(floorsNeeded, GameConfig.MAX_FLOORS); floorNum++) {\n      const floor: Floor = {\n        floorNumber: floorNum,\n        rooms: []\n      };\n      \n      // Initialize rooms for this floor\n      for (let roomNum = 1; roomNum <= GameConfig.ROOMS_PER_FLOOR; roomNum++) {\n        const room: Room = {\n          roomNumber: roomNum,\n          patron: null,\n          isEmpty: true\n        };\n        floor.rooms.push(room);\n      }\n      \n      this.building.floors.push(floor);\n    }\n    \n    // Assign patrons with specific room assignments first\n    for (const patron of assignedPatrons) {\n      if (patron.floor && patron.roomNumber) {\n        const floor = this.building.floors.find(f => f.floorNumber === patron.floor);\n        if (floor) {\n          const room = floor.rooms.find(r => r.roomNumber === patron.roomNumber);\n          if (room && room.isEmpty) {\n            room.patron = patron;\n            room.isEmpty = false;\n          } else {\n            console.warn(`Room ${patron.floor}-${patron.roomNumber} is already occupied or doesn't exist for patron ${patron.name}`);\n          }\n        }\n      }\n    }\n    \n    // Assign remaining patrons to available rooms sequentially\n    let currentFloorIndex = 0;\n    let currentRoomIndex = 0;\n    \n    for (const patron of unassignedPatrons) {\n      // Find next available room\n      let roomAssigned = false;\n      \n      while (currentFloorIndex < this.building.floors.length && !roomAssigned) {\n        const floor = this.building.floors[currentFloorIndex];\n        \n        while (currentRoomIndex < floor.rooms.length && !roomAssigned) {\n          const room = floor.rooms[currentRoomIndex];\n          \n          if (room.isEmpty) {\n            room.patron = patron;\n            room.isEmpty = false;\n            roomAssigned = true;\n            console.log(`ðŸ  Assigned ${patron.name} to Floor ${floor.floorNumber}, Room ${room.roomNumber}`);\n          }\n          \n          currentRoomIndex++;\n        }\n        \n        if (!roomAssigned) {\n          currentFloorIndex++;\n          currentRoomIndex = 0;\n        }\n      }\n      \n      if (!roomAssigned) {\n        console.warn(`Could not assign room for patron ${patron.name} - building is full`);\n      }\n    }\n    \n    console.log(`ðŸ¢ Generated building with ${this.building.floors.length} floors`);\n  }\n\n  getPatrons(): Patron[] {\n    return [...this.patrons];\n  }\n\n  getBuilding(): BuildingLayout {\n    return this.building;\n  }\n\n  getPatronById(id: string): Patron | undefined {\n    return this.patrons.find(p => p.id === id);\n  }\n\n  getPatronInRoom(floor: number, roomNumber: number): Patron | null {\n    const floorData = this.building.floors.find(f => f.floorNumber === floor);\n    if (!floorData) return null;\n    \n    const room = floorData.rooms.find(r => r.roomNumber === roomNumber);\n    return room ? room.patron : null;\n  }\n\n  getFloorCount(): number {\n    return this.building.floors.length;\n  }\n\n  getRoomCount(floor: number): number {\n    const floorData = this.building.floors.find(f => f.floorNumber === floor);\n    return floorData ? floorData.rooms.length : 0;\n  }\n\n  isRoomEmpty(floor: number, roomNumber: number): boolean {\n    const floorData = this.building.floors.find(f => f.floorNumber === floor);\n    if (!floorData) return true;\n    \n    const room = floorData.rooms.find(r => r.roomNumber === roomNumber);\n    return room ? room.isEmpty : true;\n  }\n\n  getAllOccupiedRooms(): RoomPosition[] {\n    const occupiedRooms: RoomPosition[] = [];\n    \n    for (const floor of this.building.floors) {\n      for (const room of floor.rooms) {\n        if (!room.isEmpty && room.patron) {\n          occupiedRooms.push({\n            floor: floor.floorNumber,\n            roomNumber: room.roomNumber\n          });\n        }\n      }\n    }\n    \n    return occupiedRooms;\n  }\n}","import { Application, Graphics, Text, Container } from 'pixi.js';\nimport { BaseScene } from '../core/BaseScene';\nimport { GameConfig } from '../config/GameConfig';\nimport { PatronManager } from '../utils/PatronManager';\n// RoomScene imported dynamically to avoid circular dependency\n\nexport class HallwayScene extends BaseScene {\n  private patronManager: PatronManager;\n  private currentFloor: number = 1;\n  private playerSprite!: Graphics;\n  private playerPosition = { x: 100, y: 0 };\n  private playerSpeed: number = GameConfig.PLAYER_SPEED;\n  private returnFromRoom?: number; // Room number player is returning from\n  private selectedFloorInPopup: number = 1; // Currently selected floor in popup\n  \n  private doors: Container[] = [];\n  private hallwayContainer!: Container;\n  private uiContainer!: Container;\n  private interactionPrompt!: Text;\n  private nearDoorIndex: number = -1;\n  private elevatorButton!: Container;\n  private isNearElevator = false;\n\n  constructor(app: Application) {\n    super(app);\n    this.patronManager = new PatronManager();\n  }\n\n  async enter(): Promise<void> {\n    this.playerSpeed = this.layout.playerSpeed;\n    this.createBackground(GameConfig.PLACEHOLDER_COLORS.FLOOR);\n    this.createHallwayLayout();\n    this.createDoors();\n    this.createElevator();\n    this.createPlayer(); // Create player after elevator to render in front\n    this.createUI();\n    this.positionPlayer();\n    \n    console.log(`ðŸšª Entered hallway - Floor ${this.currentFloor}`);\n  }\n\n  private createHallwayLayout(): void {\n    this.hallwayContainer = new Container();\n    \n    // Hallway background (wooden floor pattern)\n    const hallwayBg = new Graphics()\n      .rect(0, 0, this.layout.screenWidth, this.layout.screenHeight)\n      .fill(GameConfig.PLACEHOLDER_COLORS.FLOOR);\n    \n    // Add some visual elements for the hallway\n    // Ceiling\n    const ceiling = new Graphics()\n      .rect(0, 0, this.layout.screenWidth, this.layout.ceilingHeight)\n      .fill(GameConfig.PLACEHOLDER_COLORS.WALL);\n    \n    this.hallwayContainer.addChild(hallwayBg, ceiling);\n    this.container.addChild(this.hallwayContainer);\n  }\n\n  private createPlayer(): void {\n    this.playerSprite = new Graphics();\n    this.updatePlayerSprite();\n    this.container.addChild(this.playerSprite);\n  }\n\n  private updatePlayerSprite(): void {\n    this.playerSprite.clear();\n    \n    // Simple player representation (colored rectangle for now)\n    this.playerSprite\n      .rect(0, 0, this.layout.playerWidth, this.layout.playerHeight)\n      .fill(GameConfig.UI_COLORS.ACCENT);\n    \n    // Add a simple \"face\" \n    this.playerSprite\n      .circle(this.layout.playerWidth / 2, this.layout.characterFaceY, this.layout.characterFaceRadius)\n      .fill(0x000000);\n  }\n\n  private createDoors(): void {\n    this.doors = [];\n    const doorWidth = this.layout.doorWidth;\n    const doorHeight = this.layout.doorHeight;\n    const doorSpacing = this.layout.screenWidth / (GameConfig.ROOMS_PER_FLOOR + 1);\n    \n    for (let i = 0; i < GameConfig.ROOMS_PER_FLOOR; i++) {\n      const doorContainer = new Container();\n      const roomNumber = i + 1;\n      \n      // Door frame\n      const doorFrame = new Graphics()\n        .rect(0, 0, doorWidth, doorHeight)\n        .fill(GameConfig.PLACEHOLDER_COLORS.DOOR);\n      \n      // Door handle\n      const doorHandle = new Graphics()\n        .circle(doorWidth - this.layout.doorHandleOffset, doorHeight / 2, this.layout.doorHandleRadius)\n        .fill(GameConfig.UI_COLORS.ACCENT);\n      \n      // Room label\n      const roomLabel = new Text({\n        text: `Room ${roomNumber}`,\n        style: {\n          fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n          fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL),\n          fill: GameConfig.UI_COLORS.TEXT,\n          align: 'center'\n        }\n      });\n      roomLabel.anchor.set(0.5);\n      roomLabel.x = doorWidth / 2;\n      roomLabel.y = -this.layout.roomLabelOffset;\n      \n      // Check if room has a patron\n      const patron = this.patronManager.getPatronInRoom(this.currentFloor, roomNumber);\n      const occupancyLabel = new Text({\n        text: patron ? patron.name : 'No one lives here right now',\n        style: {\n          fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n          fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL),\n          fill: patron ? GameConfig.UI_COLORS.SUCCESS : GameConfig.UI_COLORS.WARNING,\n          align: 'center'\n        }\n      });\n      occupancyLabel.anchor.set(0.5);\n      occupancyLabel.x = doorWidth / 2;\n      occupancyLabel.y = doorHeight + this.layout.occupancyLabelOffset;\n      \n      doorContainer.addChild(doorFrame, doorHandle, roomLabel, occupancyLabel);\n      \n      // Position door\n      doorContainer.x = doorSpacing * (i + 1) - doorWidth / 2;\n      doorContainer.y = this.layout.screenHeight / 2 - doorHeight / 2;\n      \n      // Store room data\n      (doorContainer as any).roomNumber = roomNumber;\n      (doorContainer as any).hasPatron = !!patron;\n      \n      this.doors.push(doorContainer);\n      this.container.addChild(doorContainer);\n    }\n  }\n\n  private createElevator(): void {\n    const elevatorContainer = new Container();\n    const elevatorWidth = this.layout.elevatorWidth;\n    const elevatorHeight = this.layout.elevatorHeight;\n    \n    // Elevator shaft\n    const elevatorShaft = new Graphics()\n      .rect(0, 0, elevatorWidth, elevatorHeight)\n      .fill(0x2c3e50);\n    \n    // Elevator buttons\n    const upButton = new Graphics()\n      .circle(elevatorWidth / 2, this.layout.elevatorUpButtonY, this.layout.elevatorButtonRadius)\n      .fill(this.currentFloor < this.patronManager.getFloorCount() ? \n            GameConfig.UI_COLORS.SUCCESS : GameConfig.UI_COLORS.WARNING);\n    \n    const downButton = new Graphics()\n      .circle(elevatorWidth / 2, this.layout.elevatorDownButtonY, this.layout.elevatorButtonRadius)\n      .fill(this.currentFloor > 1 ? \n            GameConfig.UI_COLORS.SUCCESS : GameConfig.UI_COLORS.WARNING);\n    \n    // Floor indicator\n    const floorIndicator = new Text({\n      text: `Floor ${this.currentFloor}`,\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center'\n      }\n    });\n    floorIndicator.anchor.set(0.5);\n    floorIndicator.x = elevatorWidth / 2;\n    floorIndicator.y = this.layout.elevatorFloorIndicatorY;\n    \n    // Elevator label\n    const elevatorLabel = new Text({\n      text: 'ELEVATOR',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center'\n      }\n    });\n    elevatorLabel.anchor.set(0.5);\n    elevatorLabel.x = elevatorWidth / 2;\n    elevatorLabel.y = this.layout.elevatorLabelY;\n    \n    elevatorContainer.addChild(elevatorShaft, upButton, downButton, floorIndicator, elevatorLabel);\n    elevatorContainer.x = this.layout.screenWidth - elevatorWidth - this.layout.elevatorMargin;\n    elevatorContainer.y = this.layout.screenHeight / 2 - elevatorHeight / 2;\n    \n    this.elevatorButton = elevatorContainer;\n    this.container.addChild(this.elevatorButton);\n  }\n\n  private createUI(): void {\n    this.uiContainer = new Container();\n    \n    // Floor indicator\n    const floorText = new Text({\n      text: `Floor ${this.currentFloor} of ${this.patronManager.getFloorCount()}`,\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'left'\n      }\n    });\n    floorText.x = this.layout.margin;\n    floorText.y = this.layout.margin;\n    \n    // Controls hint with background\n    const controlsBackground = new Graphics()\n      .rect(0, 0, this.layout.hallwayControlsBackgroundWidth, this.layout.hallwayControlsBackgroundHeight)\n      .fill(0x000000);\n    \n    const controlsText = new Text({\n      text: 'Use â† â†’ to move, SPACE to interact',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL),\n        fill: 0xffffff,\n        align: 'left'\n      }\n    });\n    controlsBackground.x = this.layout.margin;\n    controlsBackground.y = this.layout.screenHeight - this.layout.margin - this.layout.hallwayControlsBackgroundHeight;\n    \n    controlsText.x = this.layout.margin + this.layout.controlsBackgroundPadding;\n    controlsText.y = this.layout.screenHeight - this.layout.margin - controlsText.height - this.layout.controlsBackgroundPadding;\n    \n    // Interaction prompt (initially hidden)\n    this.interactionPrompt = new Text({\n      text: 'Press SPACE to interact',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n        fill: GameConfig.UI_COLORS.ACCENT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    this.interactionPrompt.anchor.set(0.5);\n    this.interactionPrompt.x = this.layout.centerX();\n    this.interactionPrompt.y = 100 * this.layout.scale;\n    this.interactionPrompt.visible = false;\n    \n    this.uiContainer.addChild(floorText, controlsBackground, controlsText, this.interactionPrompt);\n    this.container.addChild(this.uiContainer);\n  }\n\n  private positionPlayer(): void {\n    // Check if returning from a specific room\n    if (this.returnFromRoom) {\n      // Position player at the door of the room they came from\n      const doorSpacing = this.layout.screenWidth / (GameConfig.ROOMS_PER_FLOOR + 1);\n      this.playerPosition.x = doorSpacing * this.returnFromRoom - (this.layout.playerWidth / 2);\n    } else {\n      // Start player at the left side of the hallway\n      this.playerPosition.x = this.layout.playerStartX;\n    }\n    \n    // Position player so their lower left corner is slightly below door's lower left corner\n    const doorHeight = this.layout.doorHeight;\n    const doorBottom = this.layout.screenHeight / 2 + doorHeight / 2;\n    this.playerPosition.y = doorBottom + this.layout.playerGroundOffset - this.layout.playerHeight;\n    \n    this.updatePlayerPosition();\n  }\n\n  private updatePlayerPosition(): void {\n    this.playerSprite.x = this.playerPosition.x;\n    this.playerSprite.y = this.playerPosition.y;\n  }\n\n  update(deltaTime: number): void {\n    this.handleMovement(deltaTime);\n    this.checkInteractions();\n  }\n\n  private handleMovement(deltaTime: number): void {\n    const speed = this.playerSpeed * (deltaTime / 60); // Normalize to 60fps\n    \n    if (this.isKeyPressed('ArrowLeft')) {\n      this.playerPosition.x = Math.max(this.layout.hallwaySideMargin, this.playerPosition.x - speed);\n    }\n    \n    if (this.isKeyPressed('ArrowRight')) {\n      this.playerPosition.x = Math.min(\n        this.layout.screenWidth - this.layout.playerWidth - this.layout.hallwaySideMargin, \n        this.playerPosition.x + speed\n      );\n    }\n    \n    this.updatePlayerPosition();\n  }\n\n  private checkInteractions(): void {\n    const interactionDistance = this.layout.interactionDistance;\n    \n    // Check door interactions\n    this.nearDoorIndex = -1;\n    for (let i = 0; i < this.doors.length; i++) {\n      const door = this.doors[i];\n      const distance = Math.abs(this.playerPosition.x - door.x);\n      \n      if (distance < interactionDistance) {\n        this.nearDoorIndex = i;\n        break;\n      }\n    }\n    \n    // Check elevator interaction\n    const elevatorDistance = Math.abs(this.playerPosition.x - this.elevatorButton.x);\n    this.isNearElevator = elevatorDistance < interactionDistance;\n    \n    // Update interaction prompt\n    if (this.nearDoorIndex >= 0 || this.isNearElevator) {\n      this.interactionPrompt.visible = true;\n      if (this.nearDoorIndex >= 0) {\n        const door = this.doors[this.nearDoorIndex];\n        const hasPatron = (door as any).hasPatron;\n        this.interactionPrompt.text = hasPatron ? 'Press SPACE to enter room' : 'Room is empty';\n      } else {\n        this.interactionPrompt.text = 'Press SPACE for elevator';\n      }\n    } else {\n      this.interactionPrompt.visible = false;\n    }\n  }\n\n  handleKeyDown(keyCode: string): void {\n    super.handleKeyDown(keyCode);\n    \n    // Handle floor selection popup\n    if ((this as any).floorSelectionPopup) {\n      if (keyCode === 'Escape') {\n        // Close popup\n        this.container.removeChild((this as any).floorSelectionPopup);\n        (this as any).floorSelectionPopup = null;\n        return;\n      }\n      \n      // Handle arrow key floor selection\n      if (keyCode === 'ArrowUp') {\n        this.selectedFloorInPopup = Math.max(1, this.selectedFloorInPopup - 1);\n        this.updateFloorSelectionHighlight();\n        return;\n      }\n      \n      if (keyCode === 'ArrowDown') {\n        this.selectedFloorInPopup = Math.min(this.patronManager.getFloorCount(), this.selectedFloorInPopup + 1);\n        this.updateFloorSelectionHighlight();\n        return;\n      }\n      \n      // Handle Enter to select highlighted floor\n      if (keyCode === 'Enter') {\n        this.selectFloor(this.selectedFloorInPopup);\n        return;\n      }\n      \n      // Handle number key floor selection\n      const floorNum = parseInt(keyCode.replace('Digit', ''));\n      if (floorNum >= 1 && floorNum <= this.patronManager.getFloorCount()) {\n        this.selectFloor(floorNum);\n        return;\n      }\n    }\n    \n    if (keyCode === 'Space') {\n      this.handleInteraction();\n    } else if (keyCode === 'Escape') {\n      // Could add pause menu or return to start\n    }\n  }\n\n  private async handleInteraction(): Promise<void> {\n    if (this.nearDoorIndex >= 0) {\n      const door = this.doors[this.nearDoorIndex];\n      const roomNumber = (door as any).roomNumber;\n      const hasPatron = (door as any).hasPatron;\n      \n      if (hasPatron) {\n        console.log(`ðŸšª Entering room ${roomNumber} on floor ${this.currentFloor}`);\n        await this.enterRoom(roomNumber);\n      } else {\n        console.log('ðŸ“­ Room is empty');\n      }\n    } else if (this.isNearElevator) {\n      await this.showElevatorMenu();\n    }\n  }\n\n  private async enterRoom(roomNumber: number): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    if (sceneManager) {\n      // Import RoomScene dynamically to avoid circular dependency\n      const { RoomScene } = await import('./RoomScene');\n      \n      // Pass room information to the room scene\n      const currentFloorRef = this.currentFloor;\n      const patronManagerRef = this.patronManager;\n      const RoomSceneWithData = class extends RoomScene {\n        constructor(app: Application) {\n          super(app);\n          (this as any).floor = currentFloorRef;\n          (this as any).roomNumber = roomNumber;\n          (this as any).patronManager = patronManagerRef;\n        }\n      };\n      \n      await sceneManager.switchTo(RoomSceneWithData);\n    }\n  }\n\n  private async showElevatorMenu(): Promise<void> {\n    const maxFloors = this.patronManager.getFloorCount();\n    \n    // Check if there are multiple floors\n    if (maxFloors === 1) {\n      // Show message for single floor building\n      this.showElevatorMessage(\"This elevator doesn't seem to go anywhere!\");\n      return;\n    }\n    \n    // Show floor selection popup\n    this.showFloorSelectionPopup();\n  }\n\n  private showElevatorMessage(message: string): void {\n    // Create temporary message overlay\n    const messageContainer = new Container();\n    const messageWidth = this.layout.screenWidth * 0.6;\n    const messageHeight = this.layout.screenHeight * 0.15;\n    \n    // Message background\n    const messageBg = new Graphics()\n      .roundRect(0, 0, messageWidth, messageHeight, 10)\n      .fill(0x000000, 0.8)\n      .stroke({ width: 2, color: GameConfig.UI_COLORS.WARNING });\n    \n    // Message text\n    const messageText = new Text({\n      text: message,\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.BODY),\n        fill: GameConfig.UI_COLORS.WARNING,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    messageText.anchor.set(0.5);\n    messageText.x = messageWidth / 2;\n    messageText.y = messageHeight / 2;\n    \n    messageContainer.addChild(messageBg, messageText);\n    messageContainer.x = this.layout.centerX(messageWidth);\n    messageContainer.y = this.layout.centerY(messageHeight);\n    \n    this.container.addChild(messageContainer);\n    \n    // Auto-remove message after 2 seconds\n    setTimeout(() => {\n      if (messageContainer.parent) {\n        this.container.removeChild(messageContainer);\n        messageContainer.destroy();\n      }\n    }, 2000);\n  }\n\n  private showFloorSelectionPopup(): void {\n    const maxFloors = this.patronManager.getFloorCount();\n    this.selectedFloorInPopup = this.currentFloor; // Start with current floor selected\n    const popupContainer = new Container();\n    \n    // Semi-transparent background\n    const overlay = new Graphics()\n      .rect(0, 0, this.layout.screenWidth, this.layout.screenHeight)\n      .fill(0x000000, 0.7);\n    \n    // Popup background\n    const popupWidth = 300 * this.layout.scale;\n    const popupHeight = 200 * this.layout.scale;\n    const popup = new Graphics()\n      .rect(0, 0, popupWidth, popupHeight)\n      .fill(0x2c3e50)\n      .stroke({ width: 3, color: GameConfig.UI_COLORS.ACCENT });\n    \n    popup.x = this.layout.centerX() - popupWidth / 2;\n    popup.y = this.layout.centerY() - popupHeight / 2;\n    \n    // Title\n    const title = new Text({\n      text: 'Select Floor',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SUBTITLE),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    title.anchor.set(0.5);\n    title.x = popupWidth / 2;\n    title.y = 30 * this.layout.scale;\n    \n    // Floor buttons container\n    const buttonsContainer = new Container();\n    const buttonHeight = 35 * this.layout.scale;\n    const buttonSpacing = 10 * this.layout.scale;\n    const startY = 70 * this.layout.scale;\n    \n    for (let floor = 1; floor <= maxFloors; floor++) {\n      const isCurrentFloor = floor === this.currentFloor;\n      const button = new Graphics()\n        .rect(0, 0, popupWidth - (40 * this.layout.scale), buttonHeight)\n        .fill(isCurrentFloor ? GameConfig.UI_COLORS.WARNING : GameConfig.UI_COLORS.BUTTON);\n      \n      button.x = 20 * this.layout.scale;\n      button.y = startY + (floor - 1) * (buttonHeight + buttonSpacing);\n      \n      const buttonText = new Text({\n        text: isCurrentFloor ? `Floor ${floor} (Current)` : `Floor ${floor}`,\n        style: {\n          fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n          fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n          fill: GameConfig.UI_COLORS.TEXT,\n          align: 'center'\n        }\n      });\n      buttonText.anchor.set(0.5);\n      buttonText.x = button.width / 2;\n      buttonText.y = button.height / 2;\n      \n      button.addChild(buttonText);\n      buttonsContainer.addChild(button);\n      \n      // Store floor number and button for highlighting\n      (button as any).floorNumber = floor;\n      (button as any).isCurrentFloor = isCurrentFloor;\n      (button as any).buttonText = buttonText;\n    }\n    \n    // Instructions\n    const instructions = new Text({\n      text: 'Use â†‘â†“ arrows, 1-' + maxFloors + ', ENTER to select, ESC to cancel',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SMALL * 0.8),\n        fill: GameConfig.UI_COLORS.SECONDARY,\n        align: 'center'\n      }\n    });\n    instructions.anchor.set(0.5);\n    instructions.x = popupWidth / 2;\n    instructions.y = popupHeight - 20 * this.layout.scale;\n    \n    popup.addChild(title, buttonsContainer, instructions);\n    popupContainer.addChild(overlay, popup);\n    this.container.addChild(popupContainer);\n    \n    // Store references for highlighting\n    (this as any).floorSelectionPopup = popupContainer;\n    (this as any).floorButtons = buttonsContainer;\n    \n    // Initial highlight\n    this.updateFloorSelectionHighlight();\n  }\n  \n  private updateFloorSelectionHighlight(): void {\n    const buttonsContainer = (this as any).floorButtons;\n    if (!buttonsContainer) return;\n    \n    // Update all button styles\n    for (let i = 0; i < buttonsContainer.children.length; i++) {\n      const button = buttonsContainer.children[i] as Graphics;\n      const floor = (button as any).floorNumber;\n      const isCurrentFloor = (button as any).isCurrentFloor;\n      const isSelected = floor === this.selectedFloorInPopup;\n      \n      // Clear and redraw button\n      button.clear();\n      if (isSelected) {\n        button.rect(0, 0, button.width, button.height)\n              .fill(GameConfig.UI_COLORS.ACCENT);\n      } else if (isCurrentFloor) {\n        button.rect(0, 0, button.width, button.height)\n              .fill(GameConfig.UI_COLORS.WARNING);\n      } else {\n        button.rect(0, 0, button.width, button.height)\n              .fill(GameConfig.UI_COLORS.BUTTON);\n      }\n    }\n  }\n  \n  private selectFloor(floor: number): void {\n    // Remove popup\n    if ((this as any).floorSelectionPopup) {\n      this.container.removeChild((this as any).floorSelectionPopup);\n      (this as any).floorSelectionPopup = null;\n    }\n    \n    // If same floor, just exit\n    if (floor === this.currentFloor) {\n      return;\n    }\n    \n    // Navigate to selected floor with transition\n    this.goToFloor(floor);\n  }\n  \n  private async goToFloor(floor: number): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    \n    if (sceneManager) {\n      // Create new hallway scene with updated floor\n      const HallwaySceneWithFloor = class extends HallwayScene {\n        constructor(app: Application) {\n          super(app);\n          (this as any).currentFloor = floor;\n        }\n      };\n      \n      // For now, directly switch to the new floor without transition screen\n      // TODO: Add floor transition screen later\n      await sceneManager.switchTo(HallwaySceneWithFloor);\n    }\n  }\n\n  onResize(): void {\n    // Update player speed for new scale\n    this.playerSpeed = this.layout.playerSpeed;\n    \n    // Clear and recreate all elements\n    this.container.removeChildren();\n    this.createBackground(GameConfig.PLACEHOLDER_COLORS.FLOOR);\n    this.createHallwayLayout();\n    this.createPlayer();\n    this.createDoors();\n    this.createElevator();\n    this.createUI();\n    this.positionPlayer();\n  }\n}","import { Application, Graphics, Text } from 'pixi.js';\nimport { BaseScene } from '../core/BaseScene';\nimport { GameConfig } from '../config/GameConfig';\nimport { HallwayScene } from './HallwayScene';\n\nexport class TransitionScene extends BaseScene {\n  private transitionText!: Text;\n  private fadeOverlay!: Graphics;\n  private phase: 'fadeIn' | 'display' | 'fadeOut' = 'fadeIn';\n  private phaseTimer = 0;\n  private readonly DISPLAY_DURATION = 2000; // 2 seconds\n\n  constructor(app: Application) {\n    super(app);\n  }\n\n  async enter(): Promise<void> {\n    // Black background\n    this.createBackground(0x000000);\n    this.createFadeOverlay();\n    this.createTransitionText();\n    \n    console.log('ðŸšª Now entering the workshop...');\n  }\n\n  private createTransitionText(): void {\n    this.transitionText = new Text({\n      text: 'Now entering the workshop!',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.TITLE),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    \n    this.transitionText.anchor.set(0.5);\n    this.transitionText.x = this.layout.centerX();\n    this.transitionText.y = this.layout.centerY();\n    this.transitionText.alpha = 0; // Start invisible\n    \n    this.container.addChild(this.transitionText);\n  }\n\n  private createFadeOverlay(): void {\n    this.fadeOverlay = new Graphics()\n      .rect(0, 0, this.layout.screenWidth, this.layout.screenHeight)\n      .fill(0x000000);\n    \n    this.fadeOverlay.alpha = 0; // Start transparent\n    this.container.addChild(this.fadeOverlay);\n  }\n\n  update(deltaTime: number): void {\n    const deltaMs = deltaTime * 16.67; // Convert to milliseconds (roughly)\n    this.phaseTimer += deltaMs;\n    \n    switch (this.phase) {\n      case 'fadeIn':\n        this.updateFadeIn(deltaMs);\n        break;\n      case 'display':\n        this.updateDisplay();\n        break;\n      case 'fadeOut':\n        this.updateFadeOut(deltaMs);\n        break;\n    }\n  }\n\n  private updateFadeIn(_deltaMs: number): void {\n    const progress = this.phaseTimer / GameConfig.FADE_DURATION;\n    \n    // Fade in the text\n    this.transitionText.alpha = Math.min(progress, 1);\n    \n    if (progress >= 1) {\n      this.phase = 'display';\n      this.phaseTimer = 0;\n    }\n  }\n\n  private updateDisplay(): void {\n    if (this.phaseTimer >= this.DISPLAY_DURATION) {\n      this.phase = 'fadeOut';\n      this.phaseTimer = 0;\n    }\n  }\n\n  private updateFadeOut(_deltaMs: number): void {\n    const progress = this.phaseTimer / GameConfig.FADE_DURATION;\n    \n    // Fade out the text \n    this.transitionText.alpha = Math.max(1 - progress, 0);\n    \n    if (progress >= 1) {\n      // Transition complete, go to hallway\n      this.transitionToHallway();\n    }\n  }\n\n  private async transitionToHallway(): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    if (sceneManager) {\n      await sceneManager.switchTo(HallwayScene);\n    }\n  }\n\n  onResize(): void {\n    // Clear and recreate content on resize\n    this.container.removeChildren();\n    this.createBackground(0x000000);\n    this.createFadeOverlay();\n    this.createTransitionText();\n  }\n\n  handleKeyDown(keyCode: string): void {\n    super.handleKeyDown(keyCode);\n    \n    // Allow skipping the transition with any key\n    switch (keyCode) {\n      case 'Space':\n      case 'Enter':\n      case 'Escape':\n        this.transitionToHallway();\n        break;\n    }\n  }\n}","import { Application, Graphics, Text, Container } from 'pixi.js';\nimport { BaseScene } from '../core/BaseScene';\nimport { GameConfig } from '../config/GameConfig';\nimport { AboutScene } from './AboutScene';\nimport { TransitionScene } from './TransitionScene';\n\nexport class StartScene extends BaseScene {\n  private startButton!: Container;\n  private aboutButton!: Container;\n\n  constructor(app: Application) {\n    super(app);\n  }\n\n  async enter(): Promise<void> {\n    this.createBackground(GameConfig.BACKGROUND_COLOR);\n    this.createTitle();\n    this.createButtons();\n    this.setupInteractivity();\n    \n    console.log('ðŸ  Welcome to Interactive Credits - Start Scene');\n  }\n\n  private createTitle(): void {\n    // Main title\n    const titleText = new Text({\n      text: 'Visit the Workshop!',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.TITLE),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    \n    titleText.anchor.set(0.5);\n    titleText.x = this.layout.centerX();\n    titleText.y = this.layout.screenHeight * 0.3;\n    \n    // Subtitle\n    const subtitleText = new Text({\n      text: 'Interactive Credits & Patron Showcase',\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.SUBTITLE),\n        fill: GameConfig.UI_COLORS.SECONDARY,\n        align: 'center'\n      }\n    });\n    \n    subtitleText.anchor.set(0.5);\n    subtitleText.x = this.layout.centerX();\n    subtitleText.y = titleText.y + this.layout.getFontSize(80);\n    \n    this.container.addChild(titleText, subtitleText);\n  }\n\n  private createButtons(): void {\n    const buttonY = this.layout.screenHeight * 0.65;\n    const buttonSpacing = this.layout.getFontSize(200);\n    const centerX = this.layout.centerX();\n\n    // Start button\n    this.startButton = this.createButton(\n      'START',\n      centerX - buttonSpacing / 2,\n      buttonY,\n      () => this.switchToTransition()\n    );\n\n    // About button  \n    this.aboutButton = this.createButton(\n      'ABOUT',\n      centerX + buttonSpacing / 2,\n      buttonY,\n      () => this.switchToAbout()\n    );\n\n    this.container.addChild(this.startButton, this.aboutButton);\n  }\n\n  private createButton(text: string, x: number, y: number, onClick: () => void): Container {\n    const buttonContainer = new Container();\n    const buttonSize = this.layout.getButtonSize();\n    \n    // Button background\n    const buttonBg = new Graphics()\n      .roundRect(0, 0, buttonSize.width, buttonSize.height, 10)\n      .fill(GameConfig.UI_COLORS.BUTTON);\n    \n    // Button text\n    const buttonText = new Text({\n      text,\n      style: {\n        fontFamily: GameConfig.DEFAULT_FONT_FAMILY,\n        fontSize: this.layout.getFontSize(GameConfig.FONT_SIZES.UI),\n        fill: GameConfig.UI_COLORS.TEXT,\n        align: 'center',\n        fontWeight: 'bold'\n      }\n    });\n    \n    buttonText.anchor.set(0.5);\n    buttonText.x = buttonSize.width / 2; \n    buttonText.y = buttonSize.height / 2; \n    \n    buttonContainer.addChild(buttonBg, buttonText);\n    buttonContainer.x = x - buttonSize.width / 2; \n    buttonContainer.y = y - buttonSize.height / 2; \n    \n    // Make interactive\n    buttonContainer.eventMode = 'static';\n    buttonContainer.cursor = 'pointer';\n    \n    // Store references for hover effects\n    (buttonContainer as any).background = buttonBg;\n    (buttonContainer as any).text = buttonText;\n    (buttonContainer as any).onClick = onClick;\n    \n    return buttonContainer;\n  }\n\n  private setupInteractivity(): void {\n    // Start button events\n    this.startButton.on('pointerenter', () => {\n      this.updateButtonAppearance(this.startButton, true);\n    });\n    \n    this.startButton.on('pointerleave', () => {\n      this.updateButtonAppearance(this.startButton, false);\n    });\n    \n    this.startButton.on('pointerdown', () => {\n      (this.startButton as any).onClick();\n    });\n    \n    // About button events\n    this.aboutButton.on('pointerenter', () => {\n      this.updateButtonAppearance(this.aboutButton, true);\n    });\n    \n    this.aboutButton.on('pointerleave', () => {\n      this.updateButtonAppearance(this.aboutButton, false);\n    });\n    \n    this.aboutButton.on('pointerdown', () => {\n      (this.aboutButton as any).onClick();\n    });\n  }\n\n  private updateButtonAppearance(button: Container, isHovered: boolean): void {\n    const background = (button as any).background as Graphics;\n    const color = isHovered ? GameConfig.UI_COLORS.BUTTON_HOVER : GameConfig.UI_COLORS.BUTTON;\n    const buttonSize = this.layout.getButtonSize();\n    \n    background.clear();\n    background.roundRect(0, 0, buttonSize.width, buttonSize.height, 10).fill(color);\n  }\n\n  onResize(): void {\n    // Clear and recreate content on resize\n    this.container.removeChildren();\n    this.createBackground(GameConfig.BACKGROUND_COLOR);\n    this.createTitle();\n    this.createButtons();\n    this.setupInteractivity();\n  }\n\n  handleKeyDown(keyCode: string): void {\n    super.handleKeyDown(keyCode);\n    \n    switch (keyCode) {\n      case 'Enter':\n      case 'Space':\n        this.switchToTransition();\n        break;\n      case 'Escape':\n        // Could add exit confirmation here\n        break;\n    }\n  }\n\n  private async switchToTransition(): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    if (sceneManager) {\n      await sceneManager.switchTo(TransitionScene);\n    }\n  }\n\n  private async switchToAbout(): Promise<void> {\n    const sceneManager = (this.app as any).sceneManager;\n    if (sceneManager) {\n      await sceneManager.switchTo(AboutScene);\n    }\n  }\n}","import { Application } from 'pixi.js';\nimport { SceneManager } from './core/SceneManager';\nimport { StartScene } from './scenes/StartScene';\nimport { Layout } from './config/Layout';\nimport './styles/main.css';\n\nclass Game {\n  private app: Application;\n  private sceneManager: SceneManager;\n\n  constructor() {\n    this.app = new Application();\n    this.sceneManager = new SceneManager(this.app);\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      const layout = Layout.getInstance();\n      \n      // Initialize PIXI Application with responsive dimensions\n      await this.app.init({\n        width: layout.screenWidth,\n        height: layout.screenHeight,\n        backgroundColor: 0x1a1a2e,\n        antialias: true,\n        resolution: window.devicePixelRatio || 1,\n        autoDensity: true,\n      });\n\n      // Add canvas to DOM\n      const gameContainer = document.getElementById('gameContainer');\n      if (gameContainer) {\n        gameContainer.appendChild(this.app.canvas);\n      } else {\n        document.body.appendChild(this.app.canvas);\n      }\n\n      // Setup resize handling\n      this.setupResizeHandler(layout);\n\n      // Setup keyboard controls\n      this.setupKeyboardControls();\n\n      // Setup the update loop now that app is initialized\n      this.sceneManager.setupUpdateLoop();\n\n      // Attach scene manager to app for easy access\n      (this.app as any).sceneManager = this.sceneManager;\n\n      // Start with the initial scene\n      await this.sceneManager.switchTo(StartScene);\n\n      console.log('ðŸ¢ Interactive Credits initialized! Welcome to the Workshop!');\n    } catch (error) {\n      console.error('Failed to initialize game:', error);\n    }\n  }\n\n  private setupResizeHandler(layout: Layout): void {\n    layout.onResize((dimensions) => {\n      // Resize the PIXI application\n      this.app.renderer.resize(dimensions.screenWidth, dimensions.screenHeight);\n      \n      // Notify current scene about resize\n      const currentScene = this.sceneManager.getCurrentScene();\n      if (currentScene && (currentScene as any).onResize) {\n        (currentScene as any).onResize(dimensions);\n      }\n    });\n  }\n\n  private setupKeyboardControls(): void {\n    // Global keyboard event handlers\n    document.addEventListener('keydown', (event) => {\n      this.sceneManager.handleKeyDown(event.code);\n    });\n\n    document.addEventListener('keyup', (event) => {\n      this.sceneManager.handleKeyUp(event.code);\n    });\n  }\n}\n\n// Initialize and start the game\nasync function startGame(): Promise<void> {\n  const game = new Game();\n  await game.initialize();\n}\n\n// Start the game when the DOM is ready\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', startGame);\n} else {\n  startGame();\n}"],"file":"assets/index-D_ALOtkQ.js"}